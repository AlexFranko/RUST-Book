## Пакунки та Крейти

Першою частиною модульної системи, яку ми охопимо, будуть пакунки та крейти.

*Крейт* це найменша кількість коду, яку Rust компілятор розглядає за один раз. Навіть, якщо ви запускаєте `rustc`, а не `cargo` і передаєте єдиний файл з вихідним кодом (як ми це робили у секції "Написання і запуск програми на Rust" Розділу 1), компілятор розглядає цей файл як крейт. Крейти можуть містити модулі, і модулі можуть бути визначені в інших файлах, які компілюються з крейтом, як ми побачимо у наступних секціях.

Крейт може бути представленим у двох формах: двійковий крейт або бібліотечний крейт. *Двійкові крейти* - це програми, які ви можете cкомпілювати у виконувані файли, що можна запустити, такі як, наприклад, програму командного рядка чи сервер. Кожен з них має мати функцію із назвою `main`, яка визначає, що відбувається, коли виконуваний файл запускається. Усі крейти, що ми вже встигли створити, є двійковими.

*Бібліотечні крейти* не мають функції `main` і вони не компілюються у виконуваний файл. Замість цього вони визначають функціонал, призначений для спільного використання у кількох проектах. Наприклад, крейт `rand`, який ми використовували у [Розділі 2][rand],<!-- ignore --> забезпечує функціонал, що генерує рандомні числа. Більшість часу, коли Растаціанці говорять "крейт", вони мають на увазі саме бібліотечний крейт, і вони використовують "крейт" взаємозамінно із загальною концепцією програмування "бібліотека".

*Кореневий крейт* - це вихідний файл, з якого Rust компілятор розпочинає роботу і створює кореневий модуль вашого крейта (про модулі ми розкажемо детальніше у секції [“Визначення модулів для контролю області видимості та приватності”][modules]<!-- ignore -->
).

*Пакунки* - це набір одного або більше крейтів, які забезпечують набір функціоналів. Пакунок містить файл *Cargo.toml*,який описує, як зібрати ці крейти. Cargo - це, по суті, пакунок, який містить двійковий крейт для інструменту командного рядка, який ви використали для збірки вашого коду. Пакунок Cargo також містить бібліотечний крейт, від якого залежить двійковий крейт. Інші проєкти також можуть залежати від бібліотечного крейту Cargo, щоб використовувати таку ж саму логіку, яку використовують Cargo інструменти командного рядка.

Пакунок може містити стільки двійкових крейтів, скільки ви захочете, проте у більшості випадків тільки один бібліотечний. Пакунок повинен містити принаймні один крейт, буде це бібліотечний чи двійковий, різниці немає.

Давайте роглянемо, що відбувається, коли ми створюємо пакунок. Спочатку, ми вводимо команду `cargo new`:

```console
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

Після того, як ми запустили `cargo new`, ми використовуємо `ls` для того, щоб побачити, що Cargo створює. У каталозі проєкту знаходиться файл *Cargo.toml*, який дає нам проєкт. Також, є ще каталог *src*, який містить *main.rs*. Відкрийте *Cargo.toml*у вашому текустовому редакторі і побачите, що нема жодної згадки про *src/main.rs*. Cargo наслідує умову, що *src/main.rs* є кореневим крейтом двійкового крейту із тою ж самою назвою як і пакунок. Окрім цього, Cargo знає, що якщо каталог пакунків містить *src/lib.rs*, пакунок містить бібліотечний крейт із тою ж назвою, що й пакунок, і *src/lib.rs* є його кореневим крейтом. Cargo передає файли кореневих крейтів у `rustc` для збірки бібліотечного або двійкового.

Отже, ми маємо пакунок, який містить лише *src/main.rs*, означаючи, що тут міститься тільки двійковий крейт з назвою `my-project`. Якщо пакунок містить *src/main.rs* і *src/lib.rs*, він має два крейти: двійковий і бібліотечний, обидва із такою ж назвою як і у пакунка. Пакунок може мати декілька двійкових крейтів, розміщуючи файли у каталозі *src/bin*: кожен файл буде окремим двійковим крейтом.

[modules]: ch07-02-defining-modules-to-control-scope-and-privacy.html
[rand]: ch02-00-guessing-game-tutorial.html#generating-a-random-number
